# إعداد Telegram Bot و Mini App

## إنشاء Telegram Bot

### 1. إنشاء البوت

1. افتح Telegram وابحث عن [@BotFather](https://t.me/BotFather)
2. أرسل `/start`
3. أرسل `/newbot`
4. أدخل اسم البوت (مثل: "مدرسة النور - التسجيل")
5. أدخل username للبوت (مثل: "school_noor_register_bot")
6. احفظ التوكن الذي يرسله لك

### 2. إعداد Mini App

1. أرسل `/newapp` لـ @BotFather
2. اختر البوت الذي أنشأته
3. أدخل اسم التطبيق (مثل: "تسجيل الطالبات")
4. أدخل وصف مختصر (مثل: "تطبيق لتسجيل الطالبات في الصفوف 1-6")
5. ارفع صورة للتطبيق (512x512 بكسل)
   - يمكنك استخدام لوجو المدرسة أو صورة تعبر عن التعليم
6. أدخل Web App URL: `https://your-app-name.onrender.com/`
   - ⚠️ **مهم**: غيّر `your-app-name` إلى اسم تطبيقك على Render

### 3. اختبار البوت

بعد النشر على Render:
1. افتح البوت في Telegram
2. أرسل `/start`
3. يجب أن تظهر قائمة أو زر للتطبيق
4. انقر على "فتح التطبيق" أو زر Mini App

### 4. إعدادات إضافية (اختيارية)

#### إضافة أوامر للبوت:
```
/start - بدء التطبيق
/register - فتح نموذج التسجيل
/help - المساعدة
```

لإضافة الأوامر:
1. أرسل `/setcommands` لـ @BotFather
2. اختر البوت
3. أرسل قائمة الأوامر بالتنسيق أعلاه

#### رسالة الترحيب:
يمكنك إعداد رسالة ترحيب تظهر عند كتابة `/start`:

```
مرحباً بك في تطبيق تسجيل الطالبات 📚

استخدم التطبيق لتسجيل الطالبة في أحد الصفوف من 1 إلى 6.

انقر على الزر أدناه لفتح نموذج التسجيل 👇
```

### 5. اختبار التطبيق

للتأكد من عمل التطبيق:

1. **اختبار البوت**: تأكد من ظهور زر التطبيق
2. **اختبار التحميل**: تأكد من تحميل الصفحة بشكل صحيح
3. **اختبار التسجيل**: جرّب تسجيل طالبة وتحقق من ظهور البيانات في Google Sheets
4. **اختبار منع التكرار**: جرّب التسجيل مرة أخرى بنفس الحساب

### معلومات إضافية

- **Telegram ID**: يتم استخراجه تلقائياً من تطبيق Telegram
- **إغلاق تلقائي**: التطبيق يُغلق تلقائياً بعد التسجيل الناجح
- **منع التكرار**: كل حساب Telegram يمكنه التسجيل مرة واحدة فقط
- **اللغة العربية**: التطبيق يدعم اللغة العربية بالكامل مع اتجاه RTL

### استكشاف الأخطاء

**"تعذر قراءة Telegram ID"**
- تأكد من فتح التطبيق من داخل Telegram وليس المتصفح

**"لا يظهر زر التطبيق"**
- تأكد من إعداد Mini App URL بشكل صحيح في @BotFather
- تأكد من أن الرابط يعمل ويمكن الوصول إليه

**"التطبيق لا يحمّل"**
- تأكد من أن الخادم يعمل على Render
- تحقق من logs في Render Dashboard
